# 公益捐赠管理系统 - 运行说明

## 一、环境要求

### 1.1 后端环境

| 软件 | 版本要求 |
|------|----------|
| JDK | 21 |
| Maven | 3.6+ |
| MySQL | 8.0+ |

### 1.2 前端环境

| 软件 | 版本要求 |
|------|----------|
| Node.js | 18.18.0 |
| npm | 9.x+ |

---

## 二、数据库配置

### 2.1 创建数据库

1. 打开MySQL客户端（如MySQL Workbench、Navicat等）
2. 执行SQL脚本：`big_event_back/sql/charity_donation.sql`

SQL脚本会自动：
- 创建数据库 `charity_donation`
- 创建6张数据表
- 插入测试数据

### 2.2 修改数据库连接配置

打开文件：`big_event_back/src/main/resources/application.yml`

修改以下配置：

```yaml
spring:
  datasource:
    url: jdbc:mysql://localhost:3306/charity_donation?useUnicode=true&characterEncoding=utf8&serverTimezone=Asia/Shanghai&useSSL=false&allowPublicKeyRetrieval=true
    username: root  # 修改为你的MySQL用户名
    password: root  # 修改为你的MySQL密码
```

---

## 三、后端启动

### 3.0 前置检查（重要）

在启动前，请确保项目结构完整：

```
big_event_back/
├── pom.xml                          ✅ 必须在此位置
├── sql/
│   └── charity_donation.sql
└── src/main/
    ├── java/com/charity/
    │   └── CharityApplication.java
    └── resources/
        └── application.yml
```

如果 `pom.xml` 在根目录，而不是在 `big_event_back` 下，请先移动到正确位置！

---

### 3.1 方式一：使用IntelliJ IDEA 2025启动（推荐）

#### 步骤1：打开项目
1. 关闭IDEA中已打开的其他项目（如果有）
2. 在IDEA欢迎页，点击 **Open**
3. 选择目录：`c:\Users\nonam\Desktop\前后端测试\big_event_back`
4. 点击 **OK**

#### 步骤2：确认Maven识别（IDEA 2025版）
打开项目后，检查以下几点：

**检查1：右侧是否有Maven面板**
- 看IDEA窗口右侧，找Maven图标（🔨 或 📦）
- 如果没有，点击侧边栏底部的 **三个点**（⋮）或 **+** 号
- 选择 **Maven**，Maven面板就会出现

**检查2：刷新Maven依赖（IDEA 2025版）**
- 方式一：在Maven面板顶部工具栏，找刷新图标（🔄 循环箭头），点击它
- 方式二：右键点击左侧项目树中的 `pom.xml` → 选择 **Maven** → **Reload Project**
- 方式三：使用快捷键 `Ctrl + Shift + O`
- 方式四：点击顶部菜单 **Build** → 找 **Reload All Projects**

**检查3：项目是否被识别为Maven项目**
- 右键点击项目根目录下的 **pom.xml**
- 如果看到 **Add as Maven Project**，点击它
- 如果看到 **Maven** 子菜单，说明已识别

**检查4：Maven配置（可选）**
1. 打开 **File** → **Settings**（或按 `Ctrl+Alt+S`）
2. 导航到 **Build, Execution, Deployment** → **Build Tools** → **Maven**
3. 确认配置（如果需要修改）：
   - **Maven home path**：可以使用IDEA自带的或你自己安装的
   - **User settings file**：你的Maven settings.xml路径
   - **Local repository**：本地仓库路径
4. 点击 **Apply** 和 **OK**

#### 步骤3：配置JDK 21
1. 打开 **File** → **Project Structure**（或按 `Ctrl+Alt+Shift+S`）
2. 选择 **Project**：
   - **SDK**：点击下拉框，选择 **JDK 21**
   - 如果没有JDK 21：
     - 点击 **Add SDK** → **Download JDK**
     - Version选择 **21**，Vendor选择 **Eclipse Temurin** 或 **Oracle**
     - 点击 **Download**
   - **Language level**：选择 **21**
3. 选择 **Modules**：
   - 确认 **Dependencies** 标签页中的 **Module SDK** 也是 JDK 21
4. 点击 **Apply** 和 **OK**

#### 步骤4：刷新Maven依赖
1. 打开右侧 **Maven** 面板
2. 点击刷新按钮（🔄 **Reload All Maven Projects**）
3. 等待依赖下载完成（首次可能需要3-10分钟，取决于网络速度）
4. 可以看到Maven面板中出现了 **Dependencies** 目录

#### 步骤5：修改数据库配置
1. 找到文件：`src/main/resources/application.yml`
2. 双击打开
3. 修改数据库用户名和密码：
```yaml
spring:
  datasource:
    username: root  # 改成你的MySQL用户名
    password: root  # 改成你的MySQL密码
```
4. 保存文件（`Ctrl+S`）

#### 步骤6：运行项目
1. 在左侧项目树中找到：`src/main/java/com/charity/CharityApplication.java`
2. 双击打开
3. 点击文件左侧行号旁边的 **绿色三角形** ▶️
4. 或者右键点击文件 → 选择 **Run 'CharityApplication.main()'**

#### 步骤7：验证启动成功
看到控制台输出以下内容表示启动成功：
```
  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/
 :: Spring Boot ::                (v3.3.0)

...
========================================
  公益捐赠管理系统启动成功！
  后端地址: http://localhost:8080/api
========================================
```

---

### 3.2 方式二：使用Maven命令启动

1. 打开命令行（PowerShell或CMD），进入项目目录：
   ```bash
   cd c:\Users\nonam\Desktop\前后端测试\big_event_back
   ```

2. 编译项目：
   ```bash
   mvn clean package -DskipTests
   ```

3. 启动项目：
   ```bash
   java -jar target/charity-donation-system-1.0.0.jar
   ```

---

### 3.3 验证后端启动

浏览器访问：`http://localhost:8080/api/project/list`

如果返回JSON数据（即使是登录失败提示），说明后端启动成功。

---

## 四、前端启动

### 4.1 安装依赖

1. 打开命令行，进入前端项目目录：
   ```bash
   cd big_event_front
   ```

2. 安装依赖（首次运行需要）：
   ```bash
   npm install
   ```

   注意：确保Node.js版本为18.18.0，否则可能安装失败。

### 4.2 启动开发服务器

```bash
npm run dev
```

看到以下日志表示启动成功：
```
  VITE v5.0.12  ready in xxx ms

  ➜  Local:   http://localhost:5173/
  ➜  Network: use --host to expose
```

### 4.3 访问系统

浏览器打开：`http://localhost:5173/`

---

## 五、默认账号

| 角色 | 用户名 | 密码 |
|------|--------|------|
| 管理员 | admin | 123456 |
| 普通用户 | user1 | 123456 |
| 普通用户 | user2 | 123456 |

---

## 六、功能测试

### 6.1 用户端测试

1. 登录：使用 user1/123456 登录
2. 浏览项目：查看捐赠项目列表
3. 查看详情：点击项目查看详情和进度
4. 进行捐赠：选择金额，提交捐赠
5. 查看记录：在"我的捐赠"中查看历史记录
6. 查看凭证：点击"查看凭证"生成二维码
7. 主题切换：点击右上角月亮/太阳图标切换主题
8. 个人中心：修改个人信息

### 6.2 管理员端测试

1. 登录：使用 admin/123456 登录
2. 项目管理：在"项目管理"中发布/编辑/删除项目
3. 审核项目：修改项目状态（待审核→进行中→已完成）
4. 数据统计：在"数据统计"中查看可视化图表

---

## 七、常见问题

### 7.1 IDEA相关问题

**问题1：在IDEA中找不到Maven面板**
- 解决：
  1. 点击IDEA顶部菜单 **View** → **Tool Windows** → **Maven**
  2. 或者点击侧边栏底部的 **三个点**（⋮）→ 选择 **Maven**

**问题2：项目没有被识别为Maven项目**
- 解决：
  1. 确认 `pom.xml` 在 `big_event_back` 根目录下
  2. 右键点击 `pom.xml` → 选择 **Add as Maven Project**
  3. 如果还是不行，关闭项目重新打开

**问题3：右键CharityApplication没有Run选项**
- 解决：
  1. 确认项目已被识别为Maven项目（见问题2）
  2. 点击右侧Maven面板的刷新按钮（🔄）
  3. 等待依赖下载完成
  4. 点击 **Build** → **Rebuild Project**

**问题4：Maven依赖下载慢或失败**
- 解决：配置阿里云Maven镜像
  1. 打开你的Maven `settings.xml`（通常在 `C:\Users\你的用户名\.m2\settings.xml`）
  2. 添加或修改 `<mirrors>` 部分：
```xml
<mirrors>
  <mirror>
    <id>aliyun</id>
    <mirrorOf>central</mirrorOf>
    <name>Aliyun Maven</name>
    <url>https://maven.aliyun.com/repository/public</url>
  </mirror>
</mirrors>
```
  3. 保存后，在IDEA中刷新Maven

**问题5：提示JDK版本不匹配**
- 解决：
  1. 打开 **File** → **Project Structure** → **Project**
  2. 设置 **SDK** 为 JDK 21
  3. 设置 **Language level** 为 21
  4. 打开 **File** → **Settings** → **Build, Execution, Deployment** → **Compiler** → **Java Compiler**
  5. 确认 **Project bytecode version** 为 21
  6. 确认模块的 **Target bytecode version** 也是 21

---

### 7.2 后端启动失败

**问题1：端口8080被占用**
- 解决：
  1. 修改 `application.yml` 中的端口号：
```yaml
server:
  port: 8081  # 修改为其他端口
```
  2. 或者关闭占用8080端口的程序：
     - 打开命令行，输入：`netstat -ano | findstr :8080`
     - 找到PID后，输入：`taskkill /PID <PID> /F`

**问题2：数据库连接失败**
- 检查清单：
  1. ✅ MySQL服务是否启动
  2. ✅ 数据库用户名、密码是否正确
  3. ✅ 数据库名称是否为 `charity_donation`
  4. ✅ SQL脚本是否已执行
  5. ✅ application.yml中的配置是否正确

- 测试数据库连接：
  1. 用MySQL Workbench或Navicat测试连接
  2. 确认可以连接到 `charity_donation` 数据库

**问题3：提示"Invalid value type for attribute 'factoryBeanObjectType'"**
- 解决：这个问题是Spring Security配置冲突导致的，我们已经在代码中排除了Security自动配置，请确保使用最新的代码。

---

### 7.3 前端启动失败

**问题1：Node.js版本不对**
- 解决：
  1. 检查当前版本：`node -v`
  2. 如果不是18.18.0，安装正确版本：
     - 下载地址：https://nodejs.org/dist/v18.18.0/
     - 或者使用nvm（Node Version Manager）：
       ```bash
       nvm install 18.18.0
       nvm use 18.18.0
       ```

**问题2：npm install 失败**
- 解决步骤：
  1. 清除npm缓存：
     ```bash
     npm cache clean --force
     ```
  2. 使用淘宝镜像：
     ```bash
     npm config set registry https://registry.npmmirror.com
     npm install
     ```
  3. 如果还是失败，删除 `node_modules` 文件夹和 `package-lock.json`，重新安装

**问题3：跨域问题**
- 解决：
  1. 确认后端已启动且正常运行
  2. 后端已配置CORS，无需额外配置
  3. 检查前端 `vite.config.js` 中的代理配置是否正确

---

### 7.4 登录失败

**问题：密码错误**
- 默认账号：
  | 角色 | 用户名 | 密码 |
  |------|--------|------|
  | 管理员 | admin | 123456 |
  | 普通用户 | user1 | 123456 |

- 如果忘记密码，可以重新执行SQL脚本重置数据

---

## 八、项目结构

### 8.1 后端结构

```
big_event_back/
├── pom.xml                           # Maven配置
├── sql/
│   └── charity_donation.sql         # 数据库脚本
└── src/main/
    ├── java/com/charity/
    │   ├── CharityApplication.java   # 启动类
    │   ├── config/                   # 配置类
    │   │   ├── CorsConfig.java       # 跨域配置
    │   │   └── MybatisPlusConfig.java # MyBatis-Plus配置
    │   ├── controller/               # 控制器
    │   │   ├── UserController.java
    │   │   ├── DonationProjectController.java
    │   │   └── DonationRecordController.java
    │   ├── service/                  # 业务逻辑
    │   │   ├── UserService.java
    │   │   ├── DonationProjectService.java
    │   │   └── DonationRecordService.java
    │   ├── mapper/                   # 数据访问
    │   │   ├── UserMapper.java
    │   │   ├── DonationProjectMapper.java
    │   │   └── DonationRecordMapper.java
    │   ├── entity/                   # 实体类
    │   │   ├── User.java
    │   │   ├── DonationProject.java
    │   │   └── DonationRecord.java
    │   ├── dto/                      # 数据传输对象
    │   │   └── Result.java
    │   └── utils/                    # 工具类
    │       └── JwtUtil.java
    └── resources/
        └── application.yml           # 配置文件
```

### 8.2 前端结构

```
big_event_front/
├── package.json                      # 依赖配置
├── vite.config.js                    # Vite配置
├── index.html                        # HTML入口
└── src/
    ├── main.js                       # JS入口
    ├── App.vue                       # 根组件
    ├── router/                       # 路由
    │   └── index.js
    ├── store/                        # 状态管理
    │   └── user.js
    ├── utils/                        # 工具类
    │   └── request.js                # Axios封装
    ├── styles/                       # 样式
    │   └── index.scss
    ├── layout/                       # 布局
    │   └── MainLayout.vue
    └── views/                        # 页面组件
        ├── Login.vue
        ├── Register.vue
        ├── ProjectList.vue
        ├── ProjectDetail.vue
        ├── MyDonations.vue
        ├── Profile.vue
        └── admin/
            ├── ProjectManage.vue
            └── Statistics.vue
```

---

## 九、技术栈说明

### 9.1 后端技术栈

- **Spring Boot 3.3.0**：后端框架，基于Spring 6.1.8
- **MyBatis Plus 3.5.5**：ORM框架，简化数据库操作
- **MySQL 8.0**：关系型数据库
- **JWT 0.12.5**：身份认证
- **Lombok**：简化Java代码
- **Maven**：项目管理工具

### 9.2 前端技术栈

- **Vue 3.4+**：前端框架，组合式API + Setup语法糖
- **Element Plus 2.4.4**：UI组件库，专业蓝色配色
- **Axios 1.6.x**：HTTP请求库
- **ECharts 5.4+**：数据可视化
- **Vue Router 4.2+**：路由管理
- **Pinia 2.1+**：状态管理
- **Vite 5.0.12**：前端构建工具
- **Node.js 18.18.0**：前端开发环境
- **QRCode**：二维码生成

---

## 十、毕设答辩要点

### 10.1 技术亮点

1. **前后端分离架构**：Spring Boot + Vue3，符合现代Web开发趋势
2. **JWT身份认证**：无状态会话，安全性高
3. **MyBatis Plus**：简化CRUD操作，提高开发效率
4. **数据可视化**：使用ECharts展示统计数据
5. **创新功能**：
   - 捐赠凭证二维码
   - 进度可视化（进度条+环形图表）
   - 浅色/暗黑主题切换

### 10.2 功能完整性

- 用户模块：注册、登录、个人信息管理
- 项目模块：浏览、详情、搜索、分类
- 捐赠模块：在线捐赠、记录查询、凭证生成
- 管理模块：项目管理、数据统计、状态审核

### 10.3 代码规范

- 后端：分层架构（Controller/Service/Mapper/Entity）
- 前端：组件化开发，组合式API
- 注释清晰，便于理解和维护

---

## 十一、核心功能说明（约500字）

公益捐赠管理系统是一个基于SpringBoot+Vue的Web应用，采用前后端分离架构。系统主要包含用户端和管理员端两大模块。

用户端功能包括：用户注册登录、捐赠项目浏览、项目详情查看、在线捐赠、捐赠记录查询、捐赠凭证生成、个人信息管理、主题切换等。用户可以通过系统浏览各类公益项目，查看项目详情和捐赠进度，选择合适的项目进行捐赠。每笔捐赠都会生成唯一的捐赠编号，并通过二维码展示捐赠凭证，方便用户保存和分享。系统支持浅色/暗黑两种主题，提升用户体验。

管理员端功能包括：项目发布编辑、项目状态审核、数据统计分析等。管理员可以发布新的捐赠项目，审核项目状态（待审核、进行中、已完成、已关闭），并通过ECharts图表直观查看捐赠数据统计，包括项目捐赠进度、分类统计等，为公益决策提供数据支持。

系统采用JWT进行身份认证，确保用户信息安全。使用MyBatis Plus简化数据库操作，提高开发效率。前端采用Vue3+Element Plus，实现了响应式布局和良好的用户交互体验。创新功能包括捐赠凭证二维码、进度可视化、主题切换等，为毕业设计增添亮点。

---

## 十二、联系与支持

如有问题，请检查：
1. 环境版本是否符合要求
2. 数据库连接配置是否正确
3. 端口是否被占用
4. 依赖是否正确安装

祝毕业设计顺利！
